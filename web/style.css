@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');

/* --- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–º --- */
:root {
    --bg-color: #2B2B2B;
    --sidebar-bg: #313335;
    --main-bg: #3C3F41;
    --text-color: #E0E0E0;
    --text-color-dark: #A9B7C6;
    --border-color: #45494A;
    --hover-bg: #45494A;
    --accent-color: #f658a7;
    --accent-color-danger: #E57373;
    --text-on-accent: #FFFFFF;
    --icon-size: 18px;
    --theme-transition-duration: 0.3s;
    --note-preview-font-size: 0.85em;
    --note-title-color: var(--text-color);
    --note-text-color: var(--text-color-dark);
}



body[data-theme-base="dark"] {
    --bg-color: #2B2B2B;
    --sidebar-bg: #313335;
    --main-bg: #3C3F41;
    --text-color: #E0E0E0;
    --text-color-dark: #A9B7C6;
    --border-color: #45494A;
    --hover-bg: #45494A;
}

body[data-theme-base="light"] {
    --bg-color: #F9F9F9;
    --sidebar-bg: #F1F3F4;
    --main-bg: #FFFFFF;
    --text-color: #202124;
    --text-color-dark: #5F6368;
    --border-color: #DCDCDC;
    --hover-bg: #EAEAEA;
}

body[data-theme-accent="blue"] {
    --accent-color: #589DF6;
    --accent-color-rgb: 88, 157, 246;
}

body[data-theme-accent="green"] {
    --accent-color: #6DC274;
    --accent-color-rgb: 109, 194, 116;
}

body[data-theme-accent="purple"] {
    --accent-color: #B388FF;
    --accent-color-rgb: 179, 136, 255;
}

body[data-theme-accent="orange"] {
    --accent-color: #FFAB70;
    --accent-color-rgb: 255, 171, 112;
}

body[data-theme-accent="red"] {
    --accent-color: #F06292;
    --accent-color-rgb: 240, 98, 146;
}

body[data-theme-accent="cyan"] {
    --accent-color: #4DD0E1;
    --accent-color-rgb: 77, 208, 225;
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
body[data-theme-text="default"] {
    --note-title-color: var(--text-color);
    --note-text-color: var(--text-color-dark);
}
body[data-theme-text="sky"] {
    --note-title-color: #b9e0f7;
    --note-text-color: #86a3b4;
}
body[data-theme-text="mint"] {
    --note-title-color: #c4f1d4;
    --note-text-color: #8fb19a;
}
body[data-theme-text="sand"] {
    --note-title-color: #f3eac2;
    --note-text-color: #b1aa8d;
}
body[data-theme-text="blush"] {
    --note-title-color: #f3baca;
    --note-text-color: #b18999;
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    font-family: 'Montserrat', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    overflow: hidden;
    height: 100vh;
    width: 100vw;
    -webkit-user-select: none;
    user-select: none;
}

input, textarea {
    -webkit-user-select: text;
    user-select: text;
}

.icon {
    width: var(--icon-size);
    height: var(--icon-size);
    stroke: var(--text-color-dark);
    flex-shrink: 0;
}

/* --- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è --- */
.app-container {
    display: flex;
    height: 100%;
}

.left-sidebar {
    width: 240px;
    background-color: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    padding: 15px;
    flex-shrink: 0;
}

.main-panel {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    background-color: var(--bg-color);
}

/* --- üëá –ó–ê–ú–ï–ù–ò–¢–ï –í–ï–°–¨ –≠–¢–û–¢ –ë–õ–û–ö --- */
.top-bar {
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid var(--border-color);
    gap: 20px;
    flex-shrink: 0;
    background-color: var(--sidebar-bg); /* <-- –í–û–¢ –ò–ó–ú–ï–ù–ï–ù–ò–ï */
}
/* --- üëÜ –ö–û–ù–ï–¶ –ó–ê–ú–ï–ù–´ --- */

.content-area {
    display: flex;
    flex-grow: 1;
    overflow-y: hidden;
}

/* --- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å --- */
.workspace-header {
    padding: 10px 5px;
    margin-bottom: 20px;
}

.workspace-header h2 {
    font-size: 1.4em;
    font-weight: 700;
}

.collections-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 5px;
    font-size: 0.9em;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-color-dark);
}

.collections-header .icon {
    width: 25px;
    height: 25px;
}

.collections-section {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: 0;
}

#collections-list {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex-grow: 1;
    overflow-y: auto;
}

.collection-item {
    display: flex;
    align-items: center;
    padding: 10px;
    border-radius: 6px;
    cursor: pointer;
    gap: 12px;
    transition: background-color var(--theme-transition-duration) ease, color var(--theme-transition-duration) ease, opacity 0.2s ease;
}

.collection-item:hover {
    background-color: var(--hover-bg);
}

.collection-item.selected {
    background-color: var(--main-bg);
}

.collection-item span {
    font-size: 0.95em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.divider {
    height: 1px;
    background-color: var(--border-color);
    margin: 10px;
}

#add-collection-btn {
    color: var(--text-color-dark);
}


/* --- üëá –ò–ó–ú–ï–ù–ï–ù–ù–´–ô –ë–õ–û–ö --- */
/* --- –°—Ç–∏–ª–∏ –¥–ª—è —Å—á–µ—Ç—á–∏–∫–æ–≤ --- */
.workspace-header .note-count-total {
    font-size: 0.6em;
    font-weight: 500;
    color: var(--text-color-dark);
    margin-left: 10px;
    vertical-align: middle;
}

.collection-item .note-count {
    margin-left: auto;
    font-size: 0.8em;
    font-weight: 500;
    color: var(--text-color-dark);
    background-color: var(--main-bg);
    min-width: 20px;
    height: 20px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 5px;

    /* –î–µ–ª–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –Ω–µ–≤–∏–¥–∏–º—ã–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
}

/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é */
.collection-item:hover .note-count {
    opacity: 1;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô --- */



/* --- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å --- */
.top-bar-left, .top-bar-right {
    display: flex;
    align-items: center;
    gap: 20px;
}

#vault-display-container {
    position: relative;
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    color: var(--text-color-dark);
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0 20px;
}

#vault-display-container::after {
    content: '';
    display: block;
    width: 60%;
    height: 1px;
    background-color: var(--border-color);
    border-radius: 1px;
    transition: background-color var(--theme-transition-duration) ease-in-out;
}

#new-note-btn {
    padding: 8px 20px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9em;
    transition: background-color 0.2s;
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "New" –Ω–∞ –ø—É—Å—Ç–æ–º —ç–∫—Ä–∞–Ω–µ */
body.no-notes-present #new-note-btn {
    animation: pulse-accent-glow 2s infinite ease-in-out;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

#new-note-btn:hover {
    background-color: var(--hover-bg);
}

.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.icon-btn:hover {
    background-color: var(--hover-bg);
}

.icon-btn img {
    width: 20px;
    height: 20px;
}

/* --- –ü–æ–∏—Å–∫ --- */
.search-container {
    position: relative;
    display: flex;
    align-items: center;
    max-width: 280px;
    width: 100%;
}

.search-icon {
    position: absolute;
    left: 12px;
    width: 16px;
    height: 16px;
    pointer-events: none;
}

#search-input {
    width: 100%;
    padding: 8px 12px 8px 38px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    border-radius: 6px;
    font-size: 0.9em;
}




/* --- üëá –ó–ê–ú–ï–ù–ò–¢–ï –í–ï–°–¨ –ë–õ–û–ö --- */
/* --- –§–∏–ª—å—Ç—Ä –Ω–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö --- */
#uncollected-filter-container {
    display: flex;
    align-items: center;
    gap: 10px;
}

#uncollected-filter-container>label {
    /* –ú–µ—Ç–∫–∞ "Uncollected" */
    font-size: 0.9em;
    color: var(--text-color-dark);
    cursor: pointer;
}

/* –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Å–∞–º–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è, –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º */
.switch {
    position: relative;
    display: inline-block;
    width: 36px;
    height: 20px;
    cursor: pointer;
}

#uncollected-filter-toggle {
    display: none;
    /* –ü—Ä—è—á–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —á–µ–∫–±–æ–∫—Å */
}

.slider-track {
    width: 100%;
    height: 100%;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    position: relative;
    transition: background-color 0.2s ease-in-out;
}

.slider-nub {
    width: 14px;
    height: 14px;
    background-color: var(--text-color-dark);
    border-radius: 50%;
    position: absolute;
    top: 2px;
    left: 2px;
    transition: transform 0.2s ease-in-out, background-color 0.2s ease-in-out;
}

#uncollected-filter-toggle:checked~.slider-track {
    background-color: var(--accent-color);
}

#uncollected-filter-toggle:checked~.slider-track .slider-nub {
    transform: translateX(15px);
    /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –±—ã–ª–æ 16px */
    background-color: var(--text-on-accent);
}

/* --- üëÜ –ö–û–ù–ï–¶ –ó–ê–ú–ï–ù–´ --- */

/* --- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ --- */
#collection-view-panel {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 0;
    padding: 20px 0;
    background-color: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    overflow: hidden;
    flex-shrink: 0;
    opacity: 0;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1), padding 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

#collection-view-title {
    font-size: 1.2em;
    font-weight: 500;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 20px;
    color: var(--text-color);
}

#collection-view-panel .empty-message {
    text-align: center;
    color: var(--text-color-dark);
    margin-top: 30px;
}

#notes-grid {
    position: relative;
    flex-grow: 1;
    padding: 20px;
    transition: margin-left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    margin-left: 0;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
    align-content: flex-start;
    overflow-y: auto;
}

#collection-notes-grid {
    flex-grow: 1;
    padding: 0;
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    align-content: flex-start;
    overflow-y: auto;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è "—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è" –∑–∞–ø–∏—Å–æ–∫ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ */
#collection-notes-grid {
    opacity: 0;
    transform: translateY(-20px);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.1s, opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.1s;
}

#collection-notes-grid.no-transition {
    transition: none;
}

#collection-notes-grid.is-shown {
    /* <--- –°–µ–ª–µ–∫—Ç–æ—Ä –∏–∑–º–µ–Ω–µ–Ω */
    opacity: 1;
    transform: translateY(0);
}


/* --- –ü–ª–∏—Ç–∫–∞ –∑–∞–º–µ—Ç–∫–∏ --- */
.note-tile {
    background-color: var(--main-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 10px;
    cursor: pointer;
    height: 120px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    overflow: hidden;
    transition: transform 0.3s ease-in-out, box-shadow 0.2s ease, opacity 0.3s ease-in-out, background-color var(--theme-transition-duration) ease-in-out;
}

.note-tile:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
.note-tile.is-selected {
    transform: scale(0.95);
    border-color: var(--accent-color);
    box-shadow: 0 0 10px 2px rgba(var(--accent-color-rgb), 0.5);
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

.note-title {
    position: relative;
    font-weight: 600;
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--note-title-color); /* <-- –ò–ó–ú–ï–ù–ò–¢–¨ */
    padding-bottom: 8px;
    transition: opacity 0.2s ease-in-out;
}

.note-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40%;
    height: 1px;
    background-color: var(--border-color);
}

.note-text {
    font-size: var(--note-preview-font-size);
    color: var(--note-text-color); /* <-- –ò–ó–ú–ï–ù–ò–¢–¨ */
    line-height: 1.45;
    display: -webkit-box;
    -webkit-line-clamp: 5;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    flex-grow: 1;
    margin-top: 0px;
    transition: opacity 0.2s ease-in-out;
}

#collection-notes-grid .note-tile {
    height: 90px;
    flex-direction: column;
    align-items: stretch;
    padding: 8px;
    gap: 4px;
}

#collection-notes-grid .note-title {
    font-size: 0.8em;
    padding-bottom: 4px;
}

#collection-notes-grid .note-title::after {
    display: block;
}

#collection-notes-grid .note-text {
    display: -webkit-box;
    font-size: 0.75em;
    line-height: 1.4;
    -webkit-line-clamp: 3;
}

/* --- üëá –ó–ê–ú–ï–ù–ò–¢–ï –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –ü–†–ê–í–ò–õ–ê –ù–ê –≠–¢–û–¢ –ë–õ–û–ö --- */
/* --- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ --- */
.modal {
    display: none;
    /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ */
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    justify-content: center;
    align-items: center;
}

.modal.visible {
    display: flex;
    /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º */
}

.modal-content {
    background-color: var(--bg-color);
    padding: 25px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    gap: 15px;

    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
    animation: modal-fade-in 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.modal.visible {
    background-color: rgba(0, 0, 0, 0.6);
    opacity: 1;
    pointer-events: auto;
    /* –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤–∏–¥–∏–º–æ */
}

/* –ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç–∏–µ, –°–†–ê–ó–£ –æ—Ç–∫–ª—é—á–∞–µ–º –∫–ª–∏–∫–∏ */
.modal.is-closing {
    pointer-events: none;
}

.modal-content {
    background-color: var(--bg-color);
    padding: 25px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    gap: 15px;

    transform: scale(1.05);
    opacity: 0;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease-out;
}

.modal.visible .modal-content {
    transform: scale(1);
    opacity: 1;
}

.modal.is-closing .modal-content {
    transform: scale(0.95);
    opacity: 0;
    transition-duration: 0.2s;
    /* –£—Å–∫–æ—Ä—è–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ */
}

.modal.visible {
    background-color: rgba(0, 0, 0, 0.6);
    /* –§–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω */
    opacity: 1;
    pointer-events: auto;
}

.modal-content {
    /* ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ .modal-content –æ—Å—Ç–∞—é—Ç—Å—è) */

    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
    transform: scale(1.05);
    opacity: 0;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease-out;
}

.modal.visible .modal-content {
    transform: scale(1);
    opacity: 1;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
.modal.is-closing .modal-content {
    transform: scale(0.95);
    opacity: 0;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ó–ê–ú–ï–ù–´ --- */

.modal.visible {
    display: flex;
}

.modal-content {
    background-color: var(--bg-color);
    padding: 25px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.modal-content h3 {
    font-weight: 500;
    margin-bottom: 0;
}

.modal-content p {
    color: var(--text-color-dark);
    line-height: 1.6;
    white-space: pre-wrap;
    margin-top: -5px;
}

.modal-content input, .modal-content textarea {
    width: 100%;
    padding: 10px;
    background-color: var(--main-bg);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    border-radius: 6px;
    font-size: 1em;
}

.modal-content textarea {
    min-height: 200px;
    resize: vertical;
}

.modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 10px;
}

.modal-btn {
    padding: 8px 20px;
    border-radius: 6px;
    cursor: pointer;
    border: 1px solid var(--border-color);
    background-color: var(--main-bg);
    color: var(--text-color);
}

.modal-btn.accent {
    background-color: var(--accent-color);
    color: var(--text-on-accent);
    border-color: var(--accent-color);
}

.modal-btn.danger {
    background-color: var(--accent-color-danger);
    color: white;
    border-color: var(--accent-color-danger);
}

/* --- –í—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
.dropdown-menu-item[data-action="show-metadata"] {
    position: relative;
}

/* –°—Ç—Ä–µ–ª–∫–∞-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –ø–æ–¥–º–µ–Ω—é */
.dropdown-menu-item[data-action="show-metadata"]::after {
    content: '‚ñ∫';
    font-size: 0.8em;
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-color-dark);
}

.dropdown-menu-item[data-action="show-metadata"]:hover::after {
    color: var(--text-on-accent);
}

/* –ù–µ–ø–æ–ª–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
.short-divider {
    height: 1px;
    background-color: var(--border-color);
    margin: 5px 12px;
    /* –û—Ç—Å—Ç—É–ø—ã –ø–æ –±–æ–∫–∞–º —Å–æ–∑–¥–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç "–Ω–µ–ø–æ–ª–Ω–æ—Ç—ã" */
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

.dropdown-menu {
    display: none;
    position: absolute;
    z-index: 1001;
    background-color: var(--sidebar-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    padding: 5px;
    min-width: 220px;
}

.dropdown-menu.visible {
    display: block;
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–∞–º–±—É—Ä–≥–µ—Ä-–º–µ–Ω—é */
#hamburger-menu.visible {
    transform-origin: top left;
    /* –ê–Ω–∏–º–∞—Ü–∏—è –±—É–¥–µ—Ç –∏–¥—Ç–∏ –∏–∑ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ª–µ–≤–æ–≥–æ —É–≥–ª–∞ */
    animation: fade-in-down 0.2s ease-out forwards;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è */
#hamburger-menu.is-closing {
    animation: fade-out-up 0.2s ease-out forwards;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –º–µ–Ω—é –æ–ø—Ü–∏–π (—Ç—Ä–æ–µ—Ç–æ—á–∏–µ) */
#options-menu.visible {
    transform-origin: top right;
    animation: fade-in-down 0.2s ease-out forwards;
}

#options-menu.is-closing {
    animation: fade-out-up 0.2s ease-out forwards;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

.dropdown-menu-item {
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 0.9em;
    display: flex;
    align-items: center;
    gap: 12px;
}

.dropdown-menu-item.selected, .dropdown-menu-item:hover {
    background-color: var(--accent-color);
    color: var(--text-on-accent);
}

.dropdown-divider {
    height: 1px;
    background-color: var(--border-color);
    margin: 5px 0;
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ù–µ–ø–æ–ª–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
.short-divider {
    height: 1px;
    background-color: var(--border-color);
    margin: 5px 12px; /* –û—Ç—Å—Ç—É–ø—ã –ø–æ –±–æ–∫–∞–º —Å–æ–∑–¥–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç "–Ω–µ–ø–æ–ª–Ω–æ—Ç—ã" */
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

.dropdown-header {
    padding: 8px 12px;
    font-size: 0.8em;
    color: var(--text-color-dark);
    text-transform: uppercase;
}

.dropdown-submenu-container {
    position: relative;
}

.dropdown-submenu-container .submenu {
    display: none;
    position: absolute;
    top: -5px;
    right: 100%;
    margin-right: 5px;
}

.dropdown-submenu-container .submenu.visible {
    display: block;
    /* –°–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞–µ–º –µ–≥–æ –±–ª–æ—á–Ω—ã–º */
    animation: submenu-fade-in 0.2s ease-out forwards;
}

.dropdown-submenu-container .submenu.is-closing {
    animation: submenu-fade-out 0.2s ease-out forwards;
}

/* --- –¢–µ–º–∏–∑–∞—Ü–∏—è --- */
#accent-colors-container {
    display: flex;
    justify-content: space-around;
    padding: 5px;
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
#text-colors-container {
    display: flex;
    justify-content: space-around;
    padding: 5px;
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

.theme-dot {
    position: relative;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid transparent;
    transition: transform 0.2s ease;
}

.theme-dot.selected::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    background-color: white;
    border-radius: 50%;
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
}

/* --- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è --- */
#clipboard-notification {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background-color: var(--sidebar-bg);
    color: var(--text-color);
    padding: 12px 24px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    /* --- –ò–ó–ú–ï–ù–ï–ù–ò–Ø --- */
    /* –°–≤–µ—á–µ–Ω–∏–µ —Å—Ç–∞–ª–æ –±–æ–ª–µ–µ —Ä–∞—Å—Å–µ—è–Ω–Ω—ã–º (30px), —è—Ä–∫–∏–º (0.4) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–≤–µ—Ç —Ç–µ–º—ã */
    box-shadow: 0 5px 30px rgba(var(--accent-color-rgb), 0.4);
    z-index: 2000;

    /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ (—Å–∫—Ä—ã—Ç–æ –∑–∞ —ç–∫—Ä–∞–Ω–æ–º) */
    opacity: 0;
    transform: translateX(-120%);
    pointer-events: none;

    /* --- –î–û–ë–ê–í–õ–ï–ù–û --- */
    /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–ª—è —Ç–µ–Ω–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã */
    transition: box-shadow var(--theme-transition-duration) ease-in-out;
}

#clipboard-notification.show {
    pointer-events: auto;
    animation: slide-in-out 1.1s ease-in-out forwards;
}

#clipboard-notification.show {
    opacity: 1;
    transform: translateY(0);
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö: –°–¢–ò–õ–ò –î–õ–Ø –ö–ù–û–ü–û–ö –° –¢–ï–ö–°–¢–û–ú –ò –ò–ö–û–ù–ö–û–ô --- */
.text-icon-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    background: none;
    border: none;
    color: var(--text-color-dark);
    padding: 4px 8px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
}

.text-icon-btn:hover {
    background-color: var(--hover-bg);
    color: var(--text-color);
}

.text-icon-btn img {
    width: 20px;
    height: 20px;
    stroke: currentColor; /* –ò–∫–æ–Ω–∫–∞ –±—É–¥–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ü–≤–µ—Ç –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è */
}

.text-icon-btn span {
    font-size: 0.8em;
}

.text-icon-btn.danger {
    color: var(--accent-color-danger);
}
.text-icon-btn.danger:hover {
    background-color: rgba(229, 115, 115, 0.1);
    color: var(--accent-color-danger);
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö: –°–¢–ò–õ–ò –î–õ–Ø –ö–ê–°–¢–û–ú–ù–û–ì–û "–ü–†–ò–ó–†–ê–ö–ê" --- */
#drag-ghost {
    position: fixed;
    pointer-events: none; /* –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å drop-—Å–æ–±—ã—Ç–∏—è–º */
    z-index: 9999;
    opacity: 0; /* –ü—Ä—è—á–µ–º –¥–æ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è */
    transition: opacity 0.1s;
}

#drag-ghost.visible {
    opacity: 1;
}

.ghost-tile {
    position: absolute;
    width: 200px; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä */
    height: 108px;
    background-color: var(--main-bg);
    border: 1px solid var(--accent-color);
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.ghost-tile:nth-child(2) {
    transform: translate(5px, 5px) rotate(2deg);
}

.ghost-tile:nth-child(3) {
    transform: translate(10px, 10px) rotate(4deg);
}

.ghost-counter {
    position: absolute;
    top: -10px;
    right: -10px;
    background-color: var(--accent-color);
    color: var(--text-on-accent);
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8em;
    font-weight: 600;
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */


/* --- –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è --- */
/* --- –ü–µ—Ä–µ–¥ keyFrames ---*/

@keyframes fade-in {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.newly-added {
    animation: fade-in 0.3s ease-out;
}

.fading-out {
    opacity: 0 !important;
    transform: scale(0.9) !important;
}



/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
.note-tile.is-highlighted {
    animation: pulse-highlight 1.5s ease-in-out;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

#collection-view-panel.visible {
    width: 320px;
    padding: 20px;
    opacity: 1;
}

#notes-grid.shifted {
    margin-left: 320px;
}

.notes-grid.reflowing .note-title, .notes-grid.reflowing .note-text {
    opacity: 0;
    transition: none;
}

/* --- Drag & Drop --- */
.note-tile.dragging, .collection-item.dragging {
    opacity: 0.4;
}

.collection-item.drag-over {
    color: var(--text-on-accent);
    animation: pulse-accent 1.5s infinite ease-in-out;
}

.collection-item.drag-over .icon {
    stroke: var(--text-on-accent);
}

.collection-item.drag-over-indicator {
    border-top: 2px solid var(--accent-color);
}

#collection-notes-grid .note-tile.drag-over-indicator {
    border-top: 3px solid var(--accent-color);
    transform: scale(1.03);
}

#notes-grid.drag-over {
    background-color: rgba(0, 0, 0, 0.1);
    animation: pulse-glow 2s infinite ease-in-out;
}

/* --- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ --- */
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--border-color);
    border-top-color: var(--accent-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

#loading-overlay {
    background-color: rgba(0, 0, 0, 0.4);
}

body, .left-sidebar, .main-panel, .collection-item, .collection-item:hover, .collection-item.selected, .divider, .top-bar, #new-note-btn, #new-note-btn:hover, #search-input, .icon-btn:hover, .note-tile, .note-title, .note-text, .modal-content, .modal-content input, .modal-content textarea, .modal-btn, .dropdown-menu, .dropdown-menu-item:hover, .icon {
    transition: background-color var(--theme-transition-duration) ease-in-out, color var(--theme-transition-duration) ease-in-out, border-color var(--theme-transition-duration) ease-in-out, stroke var(--theme-transition-duration) ease-in-out;
}

#note-tooltip {
    display: none;
    position: fixed;
    z-index: 2000;
    background-color: var(--sidebar-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    padding: 12px;
    max-width: 350px;
    font-size: 0.85em;
    line-height: 1.5;
    color: var(--text-color);
    pointer-events: none;
    white-space: pre-wrap;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
}

#note-tooltip.metadata-tooltip {
    padding: 8px 12px;
    /* –£–º–µ–Ω—å—à–∞–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    max-width: 200px;
    /* –î–µ–ª–∞–µ–º –æ–∫–Ω–æ –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ */
    white-space: nowrap;
    /* –ó–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫ */
}

#note-tooltip.visible {
    display: block;
    opacity: 1;
}

@keyframes pulse-accent {
    0% {
        background-color: var(--accent-color);
    }

    50% {
        background-color: color-mix(in srgb, var(--accent-color) 60%, black);
    }

    100% {
        background-color: var(--accent-color);
    }
}

@keyframes pulse-glow {
    0% {
        box-shadow: inset 0 0 15px 5px rgba(var(--accent-color-rgb), 0.4);
    }

    50% {
        box-shadow: inset 0 0 30px 10px rgba(var(--accent-color-rgb), 0.6);
    }

    100% {
        box-shadow: inset 0 0 15px 5px rgba(var(--accent-color-rgb), 0.4);
    }
}

/* --- –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä --- */
#notes-grid::-webkit-scrollbar {
    width: 8px;
}

#notes-grid::-webkit-scrollbar-track {
    background: transparent;
}

#notes-grid::-webkit-scrollbar-thumb {
    background-color: var(--border-color);
    border-radius: 4px;
}

#notes-grid::-webkit-scrollbar-thumb:hover {
    background-color: var(--accent-color);
}

#collections-list::-webkit-scrollbar, #collection-notes-grid::-webkit-scrollbar {
    width: 0;
    height: 0;
}

/* --- –ó–∞–Ω–∞–≤–µ—Å—ã --- */
#collection-view-curtain {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--sidebar-bg);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.15s ease-in-out;
}

#collection-view-curtain.active {
    opacity: 1;
}

#notes-grid-curtain {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-color);
    opacity: 0;
    pointer-events: none;
    z-index: 10;
    transition: opacity 0.2s ease-in-out;
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* --- –°–æ—Å—Ç–æ—è–Ω–∏–µ "–ü—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω" --- */
.empty-state-container {
    display: none;
    /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -60%);
    /* –°–¥–≤–∏–≥–∞–µ–º —á—É—Ç—å –≤—ã—à–µ —Ü–µ–Ω—Ç—Ä–∞ */
    text-align: center;
    color: var(--text-color-dark);
}

#notes-grid.is-empty .empty-state-container {
    display: block;
    /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º, –∫–æ–≥–¥–∞ —É —Å–µ—Ç–∫–∏ –µ—Å—Ç—å –∫–ª–∞—Å—Å .is-empty */
}

.empty-state-container p {
    font-size: 1.1em;
    max-width: 300px;
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */


#notes-grid-curtain.active {
    opacity: 1;
}

/* ... (–≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞) */
#notes-grid-curtain.active {
    opacity: 1;
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–∏—Ö –º–µ–Ω—é */
@keyframes fade-in-down {
    from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* ... (–≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞) */
@keyframes fade-in-down {
    from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏—è "—É—Ö–æ–¥–∞" –Ω–∞–≤–µ—Ä—Ö */
@keyframes fade-out-up {
    from {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    to {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –±–æ–∫–æ–≤—ã—Ö –ø–æ–¥–º–µ–Ω—é */
@keyframes submenu-fade-in {
    from {
        opacity: 0;
        transform: translateX(-10px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes submenu-fade-out {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0;
        transform: translateX(-10px);
    }
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω */
@keyframes modal-fade-in {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
@keyframes slide-in-out {
    0% {
        opacity: 0;
        transform: translateX(-120%);
    }

    15%, 85% {
        /* –£–¥–µ—Ä–∂–∏–≤–∞–µ–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ */
        opacity: 1;
        transform: translateX(0);
    }

    100% {
        opacity: 0;
        transform: translateX(20px);
        /* –°–ª–µ–≥–∫–∞ —É—Ö–æ–¥–∏—Ç –≤–ø—Ä–∞–≤–æ –ø—Ä–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–∏ */
    }
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* ... (–≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞) */
@keyframes modal-fade-in {
    /* ... */
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏—è "–¥—ã—Ö–∞–Ω–∏—è" –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
@keyframes pulse-accent-glow {
    0%, 100% {
        background-color: var(--bg-color);
        box-shadow: 0 0 0px 0px rgba(var(--accent-color-rgb), 0);
    }

    50% {
        background-color: color-mix(in srgb, var(--accent-color) 15%, var(--bg-color));
        box-shadow: 0 0 8px 3px rgba(var(--accent-color-rgb), 0.4);
    }
}

/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */


/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö --- */
/* –ê–Ω–∏–º–∞—Ü–∏—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–π –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–ª—è –ø–ª–∏—Ç–æ–∫ */
@keyframes pulse-highlight {
    from {
        box-shadow: 0 0 10px 4px rgba(var(--accent-color-rgb), 0.6);
    }

    to {
        box-shadow: 0 0 0px 0px rgba(var(--accent-color-rgb), 0);
    }
}

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö: –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é --- */
/* –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è */
#context-menu.visible {
    transform-origin: top left; /* –ê–Ω–∏–º–∞—Ü–∏—è –±—É–¥–µ—Ç "—Ä–∞—Å—Ç–∏" –∏–∑ —Ç–æ—á–∫–∏ –∫–ª–∏–∫–∞ */
    animation: context-menu-fade-in 0.2s ease-out forwards;
}

/* –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∑–∞–∫—Ä—ã—Ç–∏—è */
#context-menu.is-closing {
    animation: context-menu-fade-out 0.2s ease-out forwards;
}

/* –ö–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
@keyframes context-menu-fade-in {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* –ö–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã –¥–ª—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è */
@keyframes context-menu-fade-out {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.95);
    }
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* ... (–ø–µ—Ä–µ–¥ @keyframes) */

/* --- üëá –ó–ê–ú–ï–ù–ò–¢–ï –í–ï–°–¨ –≠–¢–û–¢ –ë–õ–û–ö --- */
#drag-delete-zone {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 6px 10px;
    border: 1px dashed var(--accent-color-danger);
    border-radius: 8px;
    color: var(--accent-color-danger);
    
    /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –Ω–µ–≤–∏–¥–∏–º–∞, –Ω–æ –ù–ï –ª–æ–º–∞–µ—Ç —Ä–∞—Å–∫–ª–∞–¥–∫—É */
    visibility: hidden;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.3s ease;
}

/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º, –∫–æ–≥–¥–∞ —Ç–∞—â–∏–º –ò –∑–∞–º–µ—Ç–∫—É, –ò –∫–æ–ª–ª–µ–∫—Ü–∏—é */
body.is-dragging-note #drag-delete-zone,
body.is-dragging-collection #drag-delete-zone {
    visibility: visible;
    opacity: 1;
    transform: scale(1);
    animation: pulse-danger-glow 1.5s infinite ease-in-out;
}

#drag-delete-zone .icon {
    stroke: var(--accent-color-danger);
}

#drag-delete-zone.drag-over {
    background-color: rgba(229, 115, 115, 0.1);
    transform: scale(1.05);
}

/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É, –∫–æ–≥–¥–∞ —Ç–∞—â–∏–º –ò –∑–∞–º–µ—Ç–∫—É, –ò –∫–æ–ª–ª–µ–∫—Ü–∏—é */
body.is-dragging-note #drag-delete-zone,
body.is-dragging-collection #drag-delete-zone {
    visibility: visible;
    opacity: 1;
    transform: scale(1);
    animation: pulse-danger-glow 1.5s infinite ease-in-out;
}

#drag-delete-zone .icon {
    stroke: var(--accent-color-danger);
}

#drag-delete-zone.drag-over {
    background-color: rgba(229, 115, 115, 0.1);
    transform: scale(1.05);
}
/* --- üëÜ –ö–û–ù–ï–¶ –ó–ê–ú–ï–ù–´ --- */

/* ... (–ø–æ—Å–ª–µ @keyframes pulse-accent-glow) */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö: –ê–ù–ò–ú–ê–¶–ò–Ø –ú–ò–ì–ê–ù–ò–Ø –ö–û–†–ó–ò–ù–´ --- */
@keyframes pulse-danger-glow {
    0%, 100% {
        box-shadow: 0 0 5px 2px rgba(229, 115, 115, 0);
    }
    50% {
        box-shadow: 0 0 15px 5px rgba(229, 115, 115, 0.4);
    }
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* ... (–≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞) */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö: –°–¢–ò–õ–ò –î–õ–Ø –£–ö–ê–ó–ê–¢–ï–õ–Ø –û–ë–£–ß–ï–ù–ò–Ø --- */
#tutorial-pointer {
    position: fixed;
    z-index: 9990;
    border-radius: 50%;
    pointer-events: none;
    
    /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –Ω–µ–≤–∏–¥–∏–º—ã–π */
    opacity: 0;
    transform: scale(2);
    width: 40px;
    height: 40px;

    /* –ê–Ω–∏–º–∞—Ü–∏—è "—Å–∏—è–Ω–∏—è" */
    box-shadow: 0 0 0 0 rgba(var(--accent-color-rgb), 0.7);
}

#tutorial-pointer.visible {
    opacity: 1;
    transform: scale(1);
    animation: pulse-pointer 2s 3; /* 3 —Ä–∞–∑–∞ –ø—É–ª—å—Å–∏—Ä—É–µ—Ç */
}

@keyframes pulse-pointer {
    0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(var(--accent-color-rgb), 0.7);
    }
    70% {
        transform: scale(1.5);
        box-shadow: 0 0 0 20px rgba(var(--accent-color-rgb), 0);
    }
    100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(var(--accent-color-rgb), 0);
    }
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

/* --- üëá –ù–û–í–´–ô –ë–õ–û–ö: –°–¢–ò–õ–ò –î–õ–Ø –ü–ê–ù–ï–õ–ò –í–´–î–ï–õ–ï–ù–ò–Ø --- */
#selection-toolbar {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translate(-50%, 150%); /* –ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞ —ç–∫—Ä–∞–Ω–æ–º */
    
    display: flex;
    align-items: center;
    gap: 20px;
    
    background-color: var(--sidebar-bg);
    padding: 10px 20px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    z-index: 1001;
    
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

#selection-toolbar:not(.hidden) {
    transform: translate(-50%, 0); /* –ö–æ–Ω–µ—á–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ */
}

#selection-counter {
    font-size: 0.9em;
    font-weight: 500;
    color: var(--text-color-dark);
    min-width: 100px;
}

/* --- üëá –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û –ü–†–ê–í–ò–õ–û --- */
.selection-actions {
    display: flex;
    gap: 15px;
    border-left: 1px solid var(--border-color);
    border-right: 1px solid var(--border-color);
    padding: 0 20px;
}
/* --- üëÜ –ö–û–ù–ï–¶ –ó–ê–ú–ï–ù–´ --- */

#selection-done-btn {
    padding: 6px 15px;
    border-radius: 6px;
    border: none;
    background-color: var(--accent-color);
    color: var(--text-on-accent);
    cursor: pointer;
}
/* --- üëÜ –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ë–õ–û–ö–ê --- */

